<h2>Sign up</h2>

<div class="row">
  <div class="col-lg-8">
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name, token: params[:token]), :html => { :class => "form-horizontal", id: 'installationForm' }) do |f| %>
      <%= devise_error_messages! %>

      <%= f.hidden_field :token, value: params[:token] || resource.token %>
      <%= f.hidden_field :is_merchant, value: true %>
      <div id="rootwizard">
        <ul class="nav nav-pills hide">
          <% unless has_token? %>
            <li class="active"><a href="#merchant-code" data-toggle="tab">merchant-code</a></li>
          <% end %>
          <li class="<%= has_token? ? 'active' : '' %>"><a href="#user-info" data-toggle="tab">user-info</a></li>
          <% unless has_token? %>
            <li><a href="#mobile-code" data-toggle="tab">mobile-code</a></li>
          <% end %>
          <li><a href="#business-info" data-toggle="tab">business-info</a></li>
        </ul>

        <div class="tab-content">
          <!-- First tab -->
          <% unless has_token? %>
            <div class="tab-pane active" id="merchant-code">
              <div class="form-group">
                <%= f.label :merchant_code, :class => 'control-label col-lg-2' %>
                <div class="col-lg-10">
                  <%= f.text_field :merchant_code, autofocus: true, :class => 'form-control' %>
                </div>
              </div>
            </div>
          <% end %>

          <!-- Second tab -->
          <div class="tab-pane <%= has_token? ? 'active' : '' %>" id="user-info">
            <div class="form-group">
              <%= f.label :first_name, :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <%= f.text_field :first_name, autofocus: true, :class => 'form-control' %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :last_name, :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <%= f.text_field :last_name, :class => 'form-control' %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :email, :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <%= f.email_field :email, :class => 'form-control', readonly: @merchant && @merchant.email.present? %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :mobile_no, :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <%= f.text_field :mobile_no, :class => 'form-control', placeholder: '+147236587', readonly: has_token? %>
              </div>
            </div>
          </div>

          <!-- Third tab -->
          <% unless has_token? %>
            <div class="tab-pane" id="mobile-code">
              <div class="form-group">
                <%= label_tag :mobile_code, nil, :class => 'control-label col-lg-2' %>
                <div class="col-lg-10">
                  <%= text_field_tag :mobile_code, '', :class => 'form-control' %>
                </div>
              </div>

              <%= link_to "did't get the code?", new_user_registration_path %>
            </div>
          <% end %>

          <!-- Fourth tab -->
          <div class="tab-pane" id="business-info">
            <div class="form-group">
              <%= f.label :organization_name, "Business name", :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <%= f.text_field :organization_name, :class => 'form-control' %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :address, "Business address", :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <%= f.text_field :address, :class => 'form-control' %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :password, :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <% if @minimum_password_length %>
                <em>(<%= @minimum_password_length %> characters minimum)</em>
                <% end %><br />
                <%= f.password_field :password, autocomplete: "off", :class => 'form-control' %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :password_confirmation, :class => 'control-label col-lg-2' %>
              <div class="col-lg-10">
                <%= f.password_field :password_confirmation, autocomplete: "off", :class => 'form-control' %>
              </div>
            </div>
          </div>


          <!-- Next buttons -->
          <ul class="pager wizard">
            <!-- <li class="previous"><a href="javascript: void(0);">Previous</a></li> -->
            <li class="next"><a href="javascript:;">Process</a></li>
            <li class="finish hide"><%= f.submit 'Finish' %></li>
          </ul>
        </div>
      </div>
    <% end %>
  </div>
</div>
